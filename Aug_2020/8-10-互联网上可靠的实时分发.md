# 互联网上可靠的实时分发
- 深入追踪RIST和SRT
- 今天的演讲者是Russell Trafford-Jones，他是Techex的广播工程师

- 需要解决的问题：低延迟，高可靠性

## UDP
- 只发送一个包，目的地不知道有数据包发出
- 使用FEC解决UDP丢包的问题，低丢包率时有效，当比特率降低时延迟会增加
- ARQ是自动重传，发生丢包后，接收端返回NACK，发送端重新发送丢失的数据包。它需要在每个包上附加时间戳和序列号，会增加RTT比例的延迟

## 不可靠网络
- IP连接通常很长，因为可能通过微波或者卫星连接，会发送丢包

## TCP
- 是HLS, DASH, CMAF, RTMP的基础
- 在文件传输，可靠传输上有优势
- 当出现丢包时会降低传输速率

## SRT概述
- SRT的全称是安全可靠的传输，它将ARQ修改为适合实时媒体的应用场景。Haivision创造了SRT联盟来推广，并且专注于成员间的合作和协同测试。目前已经有超过350个成员。
- SRT建立在UDT协议上，可以在一个连接上传输多个SRT流，并且强制加密输入数据。处理好重传的数据。

## 防火墙
- 需要修改防火墙，和管理连接的方法

## RIST
- 全称是可靠互联网流媒体传输
- VSF将其发展为一个开放规范，由RIST论坛进行商业化
- RIST需要两个端口，第一个端口用于传输媒体流， 并在第二个端口上使用RTCP创建了一个控制界面
- RTCP和RTP控制协议都是双向的

## RIST的技术路线
- 简单的配置文件：协作式的ARQ，重传限制，冗余传输路径
- 主要配置文件：流加密，多流通道，高比特率支持
- 先进配置文件：智能带宽优化，公共通道会话管理，集中回电

## RIST加密
- 采用DTLS，类似网站的TLS，采用预期分配的密钥

## RIST通道
- RIST使用GRE通道
- 消除多余的端口，允许一个连接混合多个流，可以和其他类型的数据共存

## RIST的IP数据包加上GRE头部
- 将1-7个TS数据包打包到一个RTP包，放入一个UDP包

## 替代方案
- Zixi, VideoFlow, QVidium, DVEO

## 为什么不使用RTMP
- 比较古老，只支持H264，只是相对的低延迟
- SRT的延迟低于RTMP延迟的一半

## 使用这些协议的场景
- 摄像机到基站
- 体育场转播
- 新闻报道
- 家庭转播
- 云转播