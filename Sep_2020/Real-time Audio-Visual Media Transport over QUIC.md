# Real-time Audio-Visual Media Transport over QUIC

`EPIQ'18, Dec,4,2018`  

## Abstract

- 我们考虑了如何通过QUIC传输低延迟，交互式和实时流的问题。由于QUIC流的可靠，无帧特点，因此很难支持像WebRTC类似的实时应用。我们回顾了低延迟实时应用的需求和之前的协议如何支持，然后提出了QUIC的最小扩展集以提供这种支持。和原始数据服务相比，我们的扩展以向后兼容的方式支持了部分可靠和实时的流
- KEYWORDS：QUIC, RTP, Video Streaming, Interactive Conferencing

## 1 Introduction

- 用于传输多媒体流的传输协议取决于应用场景。交互式应用采用基于UDP的RTP协议，因为它有严格的时间限制并且需要及时性而不是可靠传输。流应用有更灵活的延迟限制并且广泛采用HTTP自适应流，比如基于TCP的MPEG-DASH，权衡延迟以简化商业CDN的部署。
- 因为QUIC设计为HTTP/2的传输层，很显然可以传输HTTP自适应流量。将交互流和RTP映射到QUIC是不那么清晰的，因为这两个协议之间有显然的语义区分。
- 我们探索了如何在QUIC上最好地传输实时音视频媒体。第2节我们首先回顾了RTP和DASH的语义，他们对底层运输行为的期望和不同场景对传输的影响。第3节我们讨论了如何最好地通过QUIC交付交互式媒体流。第4节对媒体传输要求进行简要分析。第5节讨论了QUIC和RTP如何共同发展来适应交互式和非交互式实时媒体应用程序的需求

## 2 Real-time Media in the Internet

- 实时音视频应用程序采用的传输协议应该优先考虑及时性而不是可靠性。IETF标准规定了RTP，它在视频会议系统、IP音频和WebRTC信令中得到广泛部署。RTP在UDP上运行，接受不可靠但是及时的数据包交付，并添加附加的标头。该标头提供序列号、时间戳、有效负载类型和源标识符。扩展通过FEC、重传、拥塞控制、编码器控制和接收质量报告来提供部分可靠性。RTP有效载荷类型制定了编码器输出如何打包到数据报，并保证无论收到先前的数据包，都可以处理每个数据包。这种智能成帧有一个代价：发送方和接收方必须进行更新以了解每个新编码器的有效载荷类型。此外，由于传输不可靠，接收方必须对丢包鲁棒，并且可以解码部分流。

- 点播流的早期部署也使用RTP，通常使用RTSP控制通道。随着CDN的发展，大部分转移到了HTTP自适应流协议，比如MPEG DASH。和RTP不同，基于HTTP的传输不针对媒体交付优化。服务器将媒体数据以一系列可独立解码的块进行传输，每个块的持续时间为几秒，并以一定的比特率进行预编码。客户端检索对内容进行索引的清单，然后使用TCP的HTTP GET请求按顺序提取数据块。接收端的缓冲区必须足够大以隐藏下载时间段变化，并允许连续无停顿的播放。这使得HTTP自适应流很难适应低延迟播放。不过它比RTP方案更加容易部署，并且可以重用现有的CDN基础结构，因为服务器是标准的HTTP服务器。

- 实时媒体传输的进化反应了底层网络基础架构的进化和商业化。HTTP自适应流可以实时下载点播媒体。但是延迟范围相对宽松，通常用于高质量网络，因此协议无需对其进行处理。因此RTP解决了DASH协议无法做到的场景，但是增加了复杂性。

## 3 Running DASH and RTP on QUIC

- 将HTTP自适应流协议映射到QUIC是很直接的，因为QUIC设计为直接支持HTTP/2。通过在QUIC上运行，这类应用可以从丢包恢复和拥塞控制算法中受益。QUIC天然支持在一个单独的传输层流中发送多个流。每个流发送的流量都可靠并有序传输，但是QUIC不会保持流的顺序，从而消除了队头阻塞。
- 将RTP有效地映射到QUIC更加困难，接下来讨论如何将RTP映射到QUIC的当前版本。

### Mapping RTP onto QUIC

- QUIC提供了一个可靠的，连接导向的，字节流传输服务。

- 在QUIC上运行RTP，这种映射有简单的优点：一个单独的QUIC流上传输RTP数据和RTCP控制包。数据包根据其RTP有效负载类型进行多路分解。该方法的一个关键问题是队头阻塞。因为所有的数据包在单独的可靠流上传输，丢包将阻塞后续数据包的传输，直到重传成功。这对于交互式RTP应用是不可接受的，因为它允许丢包，但是有严格的延迟约束。
- 一个简单的方法可能是将每个RTP同步源映射到一个不同的QUIC流。防止视频数据包丢失阻塞音频数据。
- 发送端可以将媒体数据按块编码，切换到一个新的QUIC流，并每n个视频帧发送一个I帧。基于丢包频率选择合适的n以限制卡顿时长。理想的方法是接收端报告丢包事件，根据这个反馈切换到新的QUIC流

### Limitations

- 这些方法解决了队头阻塞和帧的问题。但是没有解决重传数据一旦超过播放时间就不再需要的问题。这是因为QUIC天然的可靠性和缺乏对时间信息的感知能力。
- 通过向QUIC增加不可靠或者部分可靠的传输可以解决不必要的重传问题。Tiesel讨论标记一些不可靠流，遵守常见的QUIC拥塞控制规则，在传输中给予不可靠流更高的优先级。

## 4 Media Transport Requirements

- 在QUIC上运行交互式媒体的三个局限：HoL阻塞、不必要的重传和应用级分帧。