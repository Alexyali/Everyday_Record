# The QUIC Fix for Optimal Video Streaming

## 摘要

QUIC占据了一部分的网络流量。目前网络社区主要讨论不同用例下QUIC的公平性、性能和适用性。关于QUIC的不可靠交付的评估仍然有待探索。我们提出扩展QUIC以支持不可靠流，并讨论了视频流传输下的应用。它可以采用不可靠流并带来巨大的好处。我们证明了如何结合可靠流和不可靠流在视频流下胜过QUIC和TCP

## 介绍

- Google提出并采用QUIC并通过其承载了超过40%的流量。我们关注通过QUIC传输视频流。TCP并不适合视频流，因为TCP会重传丢包，不可避免地导致视频流的卡顿。当丢包原因不是拥塞时，TCP的表现也很差。因为QUIC不支持不可靠传输，因此在QUIC在视频流传输方面可能比TCP更差。

- 现在通过TCP传输视频流的基本原理是流架构部署的经济性和可行性。超过52%的互联网流量通过CDN传输。因此使用DASH或者HLS传输视频流似乎更可行。但是采用HTTP流将视频流传输和TCP绑定。随着更多CDN支持QUIC，值得回顾视频流的现状。
- 可靠传输不适用于视频流传输。因为视频包括一系列类型的帧，某些类型的帧不需要可靠传输。某些类型的帧的丢包对感知质量的影响很小。通过在QUIC中增加不可靠流并提供选择性可靠传输，也即不是所有视频帧都可靠传输，可以优化视频流并提高用户体验。因为它仅设计简单的向后兼容的扩展，支持QUIC中的不可靠流。因此这个方法易于部署。
- 我们提出了对QUIC的简单扩展，增加了不可靠流。该方法的动机是在视频编码中，视频帧的重要性有区别，比如I帧比P帧更重要，丢失后对QoE的影响更大。我们的解决方案 ClipStream 对重要的帧采用可靠传输，对其他帧采用不可靠传输。为了解决不可靠流的丢包问题，需要采用FEC。采用部分可靠流会引入流同步的问题。
- 本文贡献：为QUIC增加了不可靠流；通过视频流的案例展示了QUIC的扩展

- 备注：QUIC作为传输层，实现实时视频传输，QUIC用BBR拥塞控制，提取网络反馈数据，反向控制编码器参数，协同速率控制，实现低延迟高质量的视频传输。可以采用视频感知质量SSIM和延迟的联合QoE作为优化目标，在丢包率高的网络下，牺牲一部分视频质量保证延迟。

## Status QUO

- 为了强调目前视频流方案的问题，我们设计了一个简单的实验，在丢包链接下流式传输视频。丢包率设置为0.08-5.12%，链路带宽为20Mbps，延迟为30ms。评估视频的指标包括缓冲占比率和缓冲次数率。前者是每次重新缓冲时间的持续时间并影响用户体验，后者是用户在观看视频过程中被打断的频率。
- TCP依然是视频流的主要传输协议，因为DASH的广泛应用。TCP的重传丢包没有考虑重传是否对播放器有用。不必要的重传引入了停顿和视频流质量的下降。当出现非拥塞丢包时TCP的表现较差。
- QUIC很大提高了连接建立速度，降低了初始视频缓冲时间。但是Ghasemi观察到吞吐量对视频质量的影响比延迟大。
- 仅切换到UDP进行视频流还不够。 UDP固有的不可靠性使得必须使用编码或纠错技术来恢复丢失的数据包。 以与应用程序无关的方式盲目地对每个数据包进行编码以从丢失中恢复会带来问题：纠错方案会产生大量开销，并且即使网络上一小部分用户对此类方案的无限制使用也会增加大量负载。 此外，如果没有适当的拥塞控制，UDP流将无法与其他TCP流公平地共享网络资源。

## PRIMER ON STREAMING

视频流主要通过HTTP采用DASH或者HLS传输，我们限制在和编码器无关的DASH上。视频采用H264编码并通过DASH传输。

## The QUIC FIX

设计一个对于视频流的最佳传输包括两方面：I帧必须可靠流传输；容易从B帧和P帧丢包中恢复