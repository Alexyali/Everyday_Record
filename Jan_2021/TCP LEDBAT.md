# TCP LEDBAT 

解决无线链路的bufferbloat的方法：采用基于延迟的拥塞控制算法

Low Extra Delay Background Transport (LEDBAT)是为背景数据传输设计的算法。这类协议的目标是尽可能占据一个链接中没有利用到的带宽。如果该链路开始阻塞，该算法迅速降低速率。

LEDBAT适合解决**无线网络中的缓存膨胀**问题。因为LEDBAT持续性监控其单向链路延迟，并且如果它超出了一个可配置的阈值，那么就降低其拥塞窗口。因此如果链路带宽突然下降，LEDBAT会迅速监测到上升的延迟，并降低发送速率。

如果采取无线网络的TCP分离设计，那么基站只会处理LEDBAT流，不用担心和TCP常规算法竞争的问题。

LEDBAT需要每个数据包在发送时携带时间戳，因此接收端可以计算单向延迟，并且将值通过ACK包返回。

TCP Vegas也是基于延迟的方法，但是它采用了往返延迟作为拥塞信号。因此，在无线反向链路上ACK包的延迟会引入误差。

定义以下参数：

θ(t): 从发送端到接收端的单向延迟

τ：最大自限队列延迟

T：最小测量的下行延迟

γ：增益参数，设置为1

LEDBAT的窗口增减规则设计为：
$$
W \Leftarrow W + \gamma[1-\frac{\theta(t)-T}{\tau}]
$$

### LEDBAT和Westwood的对比

- Weswood采用往返延迟的更加平滑的估计来测量拥塞，LEDBAT采用最近无滤波的单向延迟
- LEDBAT的窗口增加规则不激进，Westwood每个RTT按1增大窗口，LEDBAT增大窗口小于1
- LEDBAT的窗口减小规则是加性，但是Westwood是乘性

### 总结

如果FEC或者ARQ不足以在无线链路上使用，并且无法有效降低错误率。则应该使用传输层算法。

如果源端的TCP协议栈可以控制，则采用TCP Westwood和ABE, LDA, ZRW。如果不可控制，则使用分离TCP设计，在网关设备上使用划分节点。因此Westwood可以在无线连接下使用

如果链路错误率为0，但是链路的带宽容量波动大，导致缓存膨胀问题，那么可以采用以下方法。如果可以修改基站的软件，那么使用AQM机制。如果不能使用AQM机制，应该使用基于延迟的TCP协议，例如LEDBAT或者Vegas。这应该与拆分连接TCP体系结构一起完成，以便常规TCP在核心分组网络中继续使用。